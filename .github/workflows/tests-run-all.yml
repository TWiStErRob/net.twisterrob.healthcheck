name: 'CI'
on:
  push:
  workflow_dispatch:
  schedule:
    # https://crontab.guru/#0_6_*_*_*
    - cron:  '0 6 * * *'
concurrency:
  # Documentation suggests ${{ github.head_ref }}, but that's only available on pull_request/pull_request_target triggers, so using ${{ github.ref }}.
  # On master, we want all builds to complete even if merging happens faster to make it easier to discover at which point something broke.
  # More info: https://stackoverflow.com/a/68422069/253468:
  group: ${{ github.ref == 'refs/heads/master' && format('tests-master-{0}', github.sha) || format('tests-{0}', github.ref) }}
  cancel-in-progress: true
jobs:
  all-test:
    name: '2 ðŸ§ª Tests'
    uses: TWiStErRob/net.twisterrob.healthcheck/.github/workflows/tests-run.yml@stripe
    with:
      name: 'All'
      test-task: ':test'
      test-pattern: '*'
